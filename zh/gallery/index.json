[{"content":"ç”¨Vscodeå’ŒCmakeåˆ›å»ºä¸€ä¸ªç®€å•çš„qtåº”ç”¨ï¼Œä»¥åå¯ä»¥å½“æˆqtåº”ç”¨çš„æ¨¡æ¿ä½¿ç”¨\næ¨¡æ¿ä»£ç æ”¾åœ¨github.com/sky-bro/Qt-Cmake-Example\nå·¥å…·å‡†å¤‡ å®‰è£…qt5-baseï¼Œqtcreatorï¼Œcmake\nå®‰è£…VSCodeæ’ä»¶ï¼ŒCMakeå’ŒCMake Tools\nCMakeLists.txtè¯´æ˜ é¡¶å±‚CMakeLists.txt é¦–å…ˆæ–‡ä»¶ç›®å½•ç»“æ„å¦‚ä¸‹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15  . â”œâ”€â”€ CMakeLists.txt â”œâ”€â”€ lib â”‚ â”œâ”€â”€ add.cpp â”‚ â”œâ”€â”€ add.h â”‚ â””â”€â”€ CMakeLists.txt â”œâ”€â”€ Socks-Alice â”‚ â”œâ”€â”€ CMakeLists.txt â”‚ â”œâ”€â”€ dialog.cpp â”‚ â”œâ”€â”€ dialog.h â”‚ â”œâ”€â”€ dialog.ui â”‚ â””â”€â”€ main.cpp â””â”€â”€ Socks-Bob â”œâ”€â”€ CMakeLists.txt â””â”€â”€ main.cpp   æœ‰ä¸‰ä¸ªå­ç›®å½•ï¼Œlibå­˜æ”¾åº•å±‚é€»è¾‘å®ç°ï¼Œç¼–è¯‘æˆåº“ï¼Œç»™Socks-Aliceå’ŒSocks-Bobé“¾æ¥ï¼ŒSocks-Aliceå±äºä»£ç†è½¯ä»¶å®¢æˆ·ç«¯ï¼Œæœ‰guiï¼ŒSocks-Bobå±äºä»£ç†è½¯ä»¶æœåŠ¡ç«¯ï¼Œæ²¡æœ‰guiã€‚ä¸‰ä¸ªå­ç›®å½•ä¹Ÿéƒ½æœ‰è‡ªå·±çš„CMakeLists.txtæ–‡ä»¶ã€‚\né¡¶å±‚çš„CMakeLists.txtå¦‚ä¸‹ï¼Œè¿™é‡Œä¸»è¦ç”¨æ¥æ§åˆ¶æ•´ä¸ªé¡¹ç›®çš„è®¾ç½®ï¼Œå¯¼å…¥/å¯»æ‰¾ä¸€äº›åº“ï¼Œä»¥åŠæ·»åŠ ä¸‰ä¸ªå­ç›®å½•add_subdirectory\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25  cmake_minimum_required(VERSION 3.5)project(Qt-CMake-Example VERSION 1.0 LANGUAGES CXX)set(CMAKE_CXX_STANDARD 14)set(CMAKE_CXX_STANDARD_REQUIRED True)set(CMAKE_AUTOUIC ON)set(CMAKE_AUTOMOC ON)set(CMAKE_AUTORCC ON)find_package(QT NAMES Qt6 Qt5 COMPONENTS Network Widgets LinguistTools REQUIRED)find_package(Qt${QT_VERSION_MAJOR} COMPONENTS Network Widgets LinguistTools REQUIRED)find_package(PkgConfig)pkg_search_module(BOTAN REQUIRED botan-2\u0026gt;=2.3.0)find_library(BOTAN_LIBRARY_VAR # /usr/include/botan-2  NAMES ${BOTAN_LIBRARIES} # botan-2  HINTS ${BOTAN_LIBRARY_DIRS} ${BOTAN_LIBDIR}) # \u0026#34;\u0026#34; /usr/lib add_subdirectory(lib)add_subdirectory(Socks-Alice)add_subdirectory(Socks-Bob)  libä¸­çš„CMakeLists.txt è¿™é‡Œä¸ºäº†ç¤ºä¾‹ï¼Œåªåœ¨libä¸­æ·»åŠ äº†ä¸€ä¸ªåŠ æ³•å‡½æ•°ï¼Œæ”¾åœ¨add.hå’Œadd.cppä¸­\n1 2 3 4 5 6 7 8 9 10 11 12 13  // add.h /** * @brief add two numbers together * @param a first number * @param b second number * @returns a+b */ int add(int a, int b); // add.cpp int add(int a, int b) { return a + b; }   libä¸‹çš„CMakeLists.txtå¦‚ä¸‹ï¼Œè¿™é‡Œè¿˜ç»™å®ƒé“¾æ¥äº†qtçš„networkåº“ä»¥åŠç¬¬ä¸‰æ–¹çš„botan-2ï¼ˆä¸€ä¸ªC++å¯†ç åº“ï¼Œåœ¨é¡¶å±‚çš„CMakeLists.txtä¸­å¯¼å…¥çš„ï¼‰ï¼Œé€šè¿‡add_libraryå°†å…¶ç¼–è¯‘æˆä¸€ä¸ªåº“socksABï¼ˆSTATICé»˜è®¤ï¼‰\n1 2 3 4 5 6 7 8 9 10 11  set(SOURCE add.cpp)add_library(socksAB ${SOURCE})target_link_libraries(socksAB PUBLIC Qt${QT_VERSION_MAJOR}::Network PRIVATE ${BOTAN_LIBRARY_VAR})target_include_directories(socksAB PRIVATE ${BOTAN_INCLUDE_DIRS})  Socks-Aliceä¸­çš„CMakeLists.txt Socks-Aliceä¸­çš„guiç¼–è¾‘éƒ¨åˆ†å¯ä»¥ç”¨qtcreatoræ¥åšï¼Œé€šå¸¸å®ƒä¼šè‡ªåŠ¨ä¸ºæˆ‘ä»¬æ·»åŠ ä¸‰ä¸ªæ–‡ä»¶ï¼šxxx.cppï¼Œxxx.hå’Œxxx.uiï¼Œä½†å¯èƒ½éœ€è¦æˆ‘ä»¬è‡ªå·±æ‰‹åŠ¨å°†å®ƒä»¬æ·»åŠ åˆ°SOURCEä¸­ï¼Œå¦‚ä¸‹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17  set(SOURCE dialog.cpp dialog.h dialog.ui main.cpp )add_executable(Socks-Alice ${SOURCE})target_link_libraries(Socks-Alice PRIVATE socksAB)target_link_libraries(Socks-Alice PRIVATE Qt${QT_VERSION_MAJOR}::Widgets)target_include_directories(Socks-Alice PUBLIC \u0026#34;${PROJECT_BINARY_DIR}\u0026#34; \u0026#34;${PROJECT_SOURCE_DIR}/lib\u0026#34; PRIVATE ${BOTAN_INCLUDE_DIRS} )  å¯¹åº”çš„main.cppï¼ˆå°±æ˜¯ç®€å•æ˜¾ç¤ºä¸€ä¸‹è¿™ä¸ªçª—å£ï¼‰\n1 2 3 4 5 6 7 8 9 10  #include \u0026#34;dialog.h\u0026#34;#include \u0026lt;QApplication\u0026gt; int main(int argc, char *argv[]) { QApplication a(argc, argv); Dialog w; w.show(); return a.exec(); }   Socks-Bobä¸­çš„CMakeLists.txt å’ŒSocks-Aliceç±»ä¼¼ï¼Œä½†æ²¡æœ‰é“¾æ¥qtçš„widgetåº“ï¼ˆå› ä¸ºSocks-Bobæ”¾åœ¨æœåŠ¡å™¨ä¸Šï¼Œæˆ‘ä»¬ä¸éœ€è¦GUIï¼‰\n1 2 3 4 5 6 7 8 9 10 11  add_executable(Socks-Bob main.cpp )target_link_libraries(Socks-Bob socksAB)target_include_directories(Socks-Bob PUBLIC \u0026#34;${PROJECT_BINARY_DIR}\u0026#34; \u0026#34;${PROJECT_SOURCE_DIR}/lib\u0026#34; PRIVATE ${BOTAN_INCLUDE_DIRS} )  è¿™é‡Œçš„main.cppä½¿ç”¨äº†libä¸­çš„addå‡½æ•°ï¼Œå¦‚ä¸‹\n1 2 3 4 5 6 7 8 9 10 11 12 13  #include \u0026lt;iostream\u0026gt; #include \u0026#34;add.h\u0026#34; using namespace std; int main(int argc, char const *argv[]) { int a, b; cout \u0026lt;\u0026lt; \u0026#34;hello from Socks-Bob\\n\u0026#34;; cin \u0026gt;\u0026gt; a \u0026gt;\u0026gt; b; cout \u0026lt;\u0026lt; add(a, b) \u0026lt;\u0026lt; endl; return 0; }   ç¼–è¯‘ä¸è¿è¡Œ è¿™é‡Œå¯ä»¥å€ŸåŠ©vscodeçš„æ’ä»¶CMake Toolsæˆ–è€…ç›´æ¥å‘½ä»¤è¡Œä¸­ï¼š\n1 2 3 4  mkdir build cd build cmake .. make   å°†å¾—åˆ°buildç›®å½•ç»“æ„å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23  ./build â”œâ”€â”€ CMakeCache.txt â”œâ”€â”€ CMakeFiles â”œâ”€â”€ cmake_install.cmake â”œâ”€â”€ lib â”‚ â”œâ”€â”€ CMakeFiles â”‚ â”œâ”€â”€ cmake_install.cmake â”‚ â”œâ”€â”€ libsocksAB.a â”‚ â”œâ”€â”€ Makefile â”‚ â””â”€â”€ socksAB_autogen â”œâ”€â”€ Makefile â”œâ”€â”€ Socks-Alice â”‚ â”œâ”€â”€ CMakeFiles â”‚ â”œâ”€â”€ cmake_install.cmake â”‚ â”œâ”€â”€ Makefile â”‚ â”œâ”€â”€ Socks-Alice â”‚ â””â”€â”€ Socks-Alice_autogen â””â”€â”€ Socks-Bob â”œâ”€â”€ CMakeFiles â”œâ”€â”€ cmake_install.cmake â”œâ”€â”€ Makefile â”œâ”€â”€ Socks-Bob â””â”€â”€ Socks-Bob_autogen   å¯ä»¥è¿è¡Œç›¸åº”ç›®å½•è¿è¡Œ./Socks-Aliceæˆ–è€…./Socks-Bob\nå‚è€ƒ  cutter.re: Development env setup ","description":"","id":2,"section":"posts","tags":[""],"title":"(1) Qt, VSCode and CMake","uri":"https://sky-bro.github.io/zh/posts/socksab-devlog/1-qt-vscode-and-cmake/"},{"content":"å‡†å¤‡ç”¨qtå†™ä¸€ä¸ªç®€å•çš„fq/ä»£ç†è½¯ä»¶ï¼Œå«åšSocksABï¼Œåˆ†ä¸ºæœåŠ¡ç«¯Socks-Bobå’Œå®¢æˆ·ç«¯Socks-Aliceä¸¤ä¸ªéƒ¨åˆ†ã€‚\nç¨‹åºæºä»£ç æ‰˜ç®¡åœ¨github.com/sky-bro/SocksAB\nåŸç†ä»‹ç» é¦–å…ˆæ­£å¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è¦è®¿é—®è¿œç«¯çš„æŸä¸ªæœåŠ¡ï¼Œè¿™ä¸­é—´æˆ‘ä»¬çš„é€šä¿¡æ˜¯å¯èƒ½ä¼šè¢«GFWææ–­çš„\nè€Œfq/ä»£ç†è½¯ä»¶çš„åŸç†åˆ™å…¶å®éå¸¸ç®€å•ï¼Œæˆ‘ä»¬ä¸ç›´æ¥è®¿é—®æœåŠ¡å™¨ï¼Œè€Œæ˜¯å°†éœ€è¦çš„æ•°æ®/è¯·æ±‚é€šè¿‡æˆ‘ä»¬çš„ä¸€ä¸ªæœåŠ¡å™¨ä¸­è½¬ä¸€ä¸‹ã€‚è€Œè¿™ä¸ªæœåŠ¡å™¨é€šå¸¸æ˜¯æˆ‘ä»¬èƒ½å¤Ÿä»å›½å†…ç›´æ¥è®¿é—®ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„fqå®é™…å°±æ˜¯åˆ©ç”¨äº†GFWå¹¶æ²¡æœ‰æŠŠæ‰€æœ‰çš„èƒ½è®¿é—®google.comçš„ç”µè„‘(ip)éƒ½å°æ€æ‰ï¼Œæˆ‘ä»¬åªè¦èƒ½è®¿é—®åˆ°è¿™äº›ç”µè„‘(ip)ï¼Œå°±èƒ½è®¿é—®åˆ°google.comã€‚\nå…·ä½“æ¥è¯´ï¼Œæ­£å¸¸çš„fq/ä»£ç†è½¯ä»¶éƒ½ä¸€å®šè‡³å°‘ä¼šæœ‰ä¸¤ä¸ªéƒ¨åˆ†ï¼Œä¸€ä¸ªå®¢æˆ·ç«¯ï¼Œç”¨æ¥æ”¶é›†æœ¬åœ°çš„ä»£ç†è¯·æ±‚ï¼›è¿˜æœ‰ä¸€ä¸ªæœåŠ¡ç«¯ï¼Œæ¥æ”¶è¿™äº›è¯·æ±‚ï¼Œå¹¶å»å‘çœŸæ­£çš„æœåŠ¡å™¨å®Œæˆè¿™äº›è¯·æ±‚ã€‚\n åªæœ‰ä¸€ä¸ªéƒ¨åˆ†åŸç†ä¸Šä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œå°±æ˜¯æ¯”å¦‚ç›´æ¥åœ¨ä½ çš„å›½å¤–æŸæœåŠ¡å™¨ä¸Šæä¸€ä¸ªSocks5ä»£ç†æˆ–æ˜¯httpä»£ç†ï¼Œç„¶åä½ çš„ç”µè„‘ä¸Šç›´æ¥ä¸ºä½ çš„è½¯ä»¶è®¾å¥½ç›¸åº”çš„ä»£ç†ã€‚\né—®é¢˜å°±æ˜¯æˆ‘ä»¬ä½¿ç”¨çš„è½¯ä»¶æ‰€æ”¯æŒçš„ä»£ç†æ–¹å¼ï¼ˆä¸»è¦å°±æ˜¯sockså’Œhttpï¼‰éƒ½æ˜¯å¾ˆå®¹æ˜“è¢«GFWå‘ç°çš„ï¼Œè¿™æ ·ç›´æ¥çš„ä»£ç†æ–¹å¼æ˜¯ç”¨ä¸äº†å¤šä¹…äº†\n é¦–å…ˆSocks-Aliceéœ€è¦å®ç°Socks5ä»£ç†æˆ–æ˜¯httpä»£ç†ï¼Œè¿™æ ·æˆ‘ä»¬çš„æµè§ˆå™¨æˆ–æ˜¯å…¶å®ƒå•¥è½¯ä»¶å°±å¯ä»¥é…ç½®èµ°è¿™ä¸ªä»£ç†äº†ã€‚æ¥ç€ä»£ç†è½¯ä»¶å®¢æˆ·ç«¯Socks-Aliceé€šè¿‡ä¸€ç³»åˆ—æ“ä½œå°†è¯·æ±‚å‘ç»™ä»£ç†è½¯ä»¶æœåŠ¡ç«¯Socks-Bobï¼Œè¿™ä¸­é—´å…·ä½“è·¯å¾„æ˜¯æ€ä¹ˆèµ°çš„ï¼ˆæ¯”å¦‚æœ‰æ²¡æœ‰å†ç»è¿‡æ›´å¤šäººä¸­è½¬ï¼‰ï¼Œæˆ–æ˜¯æ•°æ®å†…å®¹æ€ä¹ˆæ ·å½¢å¼å‘é€çš„ï¼ˆåŠ å¯†æˆ–æ˜¯ä¼ªè£…ï¼‰éƒ½æ˜¯å¾ˆè‡ªç”±çš„ï¼Œåªè¦Socks-Bobèƒ½å¤Ÿç†è§£ï¼Œè§£ææ‹¿åˆ°æ­£ç¡®çš„è¯·æ±‚ï¼Œå‘ç»™çœŸæ­£çš„æœåŠ¡å™¨å³å¯ã€‚å¦‚ä¸‹å›¾ï¼š\næ‰€ä»¥ä¸€ä¸ªfq/ä»£ç†è½¯ä»¶çš„æ ¸å¿ƒæ˜¯è¦å®ç°Socks-Aliceä¸Socks-Bobé—´çš„æ•°æ®ä¼ é€’ã€‚ç›®å‰æ¯”è¾ƒå¥½çš„æ–¹å¼å°±æ˜¯ä½¿ç”¨AEAD ciphersåŠ å¯†ä¼ è¾“ï¼Œä»¥åŠä¼ªè£…æˆtlsæµé‡ã€‚\nåŠ å¯† ç­‰ç€åé¢æ…¢æ…¢\nä¼ªè£… å†è¡¥å……\nå‚è€ƒé“¾æ¥  socks5 rfc1928 ","description":"","id":3,"section":"posts","tags":[""],"title":"(0) SocksAB Intro","uri":"https://sky-bro.github.io/zh/posts/socksab-devlog/0-socksab-intro/"},{"content":"æœ¬æ•™ç¨‹å±•ç¤ºå¦‚ä½•æ­å»ºclusterfuzzè¿›è¡Œæœ¬åœ°æµ‹è¯•ï¼Œæ•™ç¨‹ä½¿ç”¨çš„clusterfuzzç‰ˆæœ¬ä¸ºv2.0.1 (æ¨èæ€»æ˜¯ä½¿ç”¨æœ€æ–°çš„releaseç‰ˆæœ¬)ã€‚\næˆ‘çš„clusterfuzzå°†æ­å»ºåœ¨ubuntu18.04 dockerå®¹å™¨ä¸­ã€‚æœ€åæä¾›ä¸€ä¸ªdockerfileä½œä¸ºå‚è€ƒï¼Œä¸‹é¢å†…å®¹åŸºæœ¬æ˜¯å°†dockerfileä¸­çš„æ­¥éª¤ä¸€æ­¥æ­¥å±•å¼€\nå…¶å®æˆ‘çš„æ­¥éª¤åŸºæœ¬ä¹Ÿæ˜¯æŒ‰ç…§å®˜æ–¹æ•™ç¨‹æ¥çš„ï¼Œä½†ä¸»è¦ç”±äºå›½å†…ç½‘ç»œåŸå› ï¼Œä¸€äº›åœ°æ–¹éœ€è¦ç§‘å­¦ä¸Šç½‘ã€‚\næˆ‘ä½¿ç”¨çš„æ˜¯clashåˆ†æµï¼Œä¹Ÿæ˜¯è¿è¡Œåœ¨dockerå®¹å™¨å†…ï¼Œä¸ºäº†ç®€å•æˆ‘çš„clashå®¹å™¨å’Œubuntuå®¹å™¨éƒ½æ˜¯è®¾ç½®çš„networkä¸ºhostï¼ˆåŸå› æ˜¯æˆ‘å‘ç°åœ¨ubuntuä¸­å°½ç®¡è®¾ç½®äº†no_proxyï¼Œæœ‰çš„æ—¶å€™è¿˜æ˜¯ä¼šä»£ç†127.0.0.1ï¼Œå…·ä½“åŸå› ä¸æ¸…æ¥šï¼Œåæ­£ä¸ºäº†ç®€å•ç²—æš´å°±å…ˆnetworkç”¨hostï¼Œä»£ç†äº†ä¹Ÿä¸æ€•ï¼Œclashä¸­ä¼šè®¾ç½®ä¸ºç›´è¿ï¼‰\nè¿è¡Œubuntu18.04 æˆ‘æä¾›äº†ä¸€ä¸ªä¿®æ”¹è½¯ä»¶æºåçš„ubuntué•œåƒï¼šubuntu-cnï¼Œæ¯”è¾ƒæ–¹ä¾¿\næ‰€ä»¥è¿è¡Œå®¹å™¨docker:\n1 2 3 4 5 6  # ä½ åœ¨å…‹éš†ä»“åº“çš„æ—¶å€™ä¹Ÿå¯ä»¥æŒ‰ä¸‹ä¸€æ­¥è®¾ç½®ä¸‹ä»£ç†ï¼Œå¿«ä¸€äº› (å‡ åM) git clone https://github.com/google/clusterfuzz.git cd clusterfuzz # ä½¿ç”¨éœ€è¦çš„ç‰ˆæœ¬ï¼Œæ¨èç”¨æœ€æ–°ç‰ˆæœ¬ï¼Œå½“å‰æ˜¯v2.0.1 git checkout -b testv2.0.1 v2.0.1 # æˆ‘ä½¿ç”¨-båˆ›å»ºäº†ä¸€ä¸ªæ–°åˆ†æ”¯ï¼Œéšæ„ï¼Œä¹Ÿå¯ä»¥ä¸ç”¨ docker container run --network host --name clusterfuzz -it -v $(pwd):/clusterfuzz skybro/ubuntu-cn:18.04 # æˆ‘åªæµ‹è¯•äº†ubuntu18.04   è®¾ç½®å¥½ä»£ç† åç»­çš„æ“ä½œæ²¡ç‰¹åˆ«è¯´æ˜çš„è¯å°±éƒ½æ˜¯åœ¨å®¹å™¨å†…äº†\n1 2 3 4 5 6  # æ„Ÿè§‰è®¾ç½®httpä»£ç†æ¯”socksä»£ç†è¦é€‚ç”¨æ€§æ›´å¹¿ä¸€äº›ï¼Œæˆ‘ç”¨çš„clashï¼Œé»˜è®¤httpä»£ç†ç«¯å£ä¸º7890 # è¿™é‡Œå› ä¸ºæˆ‘ä¸Šé¢networkç»™è®¾çš„hostæ‰ç”¨127.0.0.1åœ°å€ # å…·ä½“æ›¿æ¢ä¸ºä½ è‡ªå·±çš„ä»£ç†åœ°å€å°±å¥½ export http_proxy=http://127.0.0.1:7890 export https_proxy=http://127.0.0.1:7890 export no_proxy=127.0.0.0/8 # è¿™ä¸ªå¯¹äºæˆ‘è¿™host networkï¼Œè®¾ä¸è®¾éƒ½è¡Œäº†ï¼Œå› ä¸ºæˆ‘clashä¸­è®¾ç½®äº†ç›´è¿ï¼ˆæˆ‘å‘ç°å³ä½¿è®¾ç½®äº†no_proxyï¼Œæœ‰çš„æ—¶å€™è¿˜æ˜¯ä¼šèµ°ä»£ç†ï¼Œæ‰€ä»¥ç›´æ¥networké‡‡ç”¨çš„hostï¼‰   å®‰è£…ä¸€äº›è½¯ä»¶ åŸºç¡€è½¯ä»¶ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30  apt-get update \u0026amp;\u0026amp; \\  apt-get upgrade -y \u0026amp;\u0026amp; \\  apt-get autoremove -y \u0026amp;\u0026amp; \\  apt-get install -y \\  apt-transport-https \\  build-essential \\  curl \\  gdb \\  libbz2-dev \\  libcurl4-openssl-dev \\  libffi-dev \\  libgdbm-dev \\  liblzma-dev \\  libncurses5-dev \\  libnss3-dev \\  libreadline-dev \\  libssl-dev \\  locales \\  lsb-release \\  net-tools \\  socat \\  sudo \\  unzip \\  util-linux \\  wget \\  zip \\  zlib1g-dev \\  patchelf \\  git \\  vim   google-cloud-sdk 1 2 3 4  CLOUD_SDK_REPO=\u0026#34;cloud-sdk-$(lsb_release -c -s)\u0026#34; \u0026amp;\u0026amp; \\  echo \u0026#34;deb https://packages.cloud.google.com/apt $CLOUD_SDK_REPOmain\u0026#34; | tee -a /etc/apt/sources.list.d/google-cloud-sdk.list \u0026amp;\u0026amp; \\  curl https://packages.cloud.google.com/apt/doc/apt-key.gpg | apt-key add - \u0026amp;\u0026amp; \\  apt-get update \u0026amp;\u0026amp; apt-get install -y google-cloud-sdk   Python3.7 1 2 3  curl -sS https://www.python.org/ftp/python/3.7.7/Python-3.7.7.tgz | tar -C /tmp -xzv (cd /tmp/Python-3.7.7 \u0026amp;\u0026amp; ./configure --enable-optimizations \u0026amp;\u0026amp; make altinstall \u0026amp;\u0026amp; rm -rf /tmp/Python-3.7.7) pip3.7 install --upgrade pip \u0026amp;\u0026amp; pip3.7 install wheel \u0026amp;\u0026amp; pip3.7 install pipenv   golang 1  apt install -y golang   java 1  apt install -y openjdk-8-jdk   gcloudä¾èµ– 1 2 3 4 5 6 7  apt-get install -y \\  google-cloud-sdk-app-engine-go \\  google-cloud-sdk-app-engine-python \\  google-cloud-sdk-app-engine-python-extras \\  google-cloud-sdk \\  google-cloud-sdk-datastore-emulator \\  google-cloud-sdk-pubsub-emulator   pythonä¾èµ– 1 2 3  cd clusterfuzz python3.7 -m pipenv --python 3.7 python3.7 -m pipenv sync --dev   å…¶å®ƒä¾èµ– 1 2 3 4 5 6 7 8 9  pipenv shell # è¿›å…¥pythonè™šæ‹Ÿç¯å¢ƒ nodeenv -p --prebuilt # å¯èƒ½éœ€è¦åå¤å¤šå°è¯•å‡ æ¬¡ï¼Œåº”è¯¥å¾ˆå¿«çš„ï¼Œæ…¢çš„è¯å°±CTRL+Cå†é‡æ¥ # å› ä¸ºæˆ‘æ˜¯rootç”¨æˆ·ï¼Œéœ€è¦ä¸‹é¢è¿™ä¸¤è¡Œ ref: https://stackoverflow.com/questions/51811564/sh-1-node-permission-denied npm config set unsafe-perm true npm install -g bower polymer-bundler # bower install # åŒæ ·å› ä¸ºæˆ‘æ˜¯rootç”¨æˆ·ï¼Œéœ€è¦åŠ ä¸Š--allow-root bower install --allow-root python butler.py bootstrap   è¿è¡Œ å¯åŠ¨è™šæ‹Ÿç¯å¢ƒ ä¸Šé¢å·²ç»å¯åŠ¨äº†ï¼Œå°±æ˜¯è¿›å…¥clusterfuzzç›®å½•ï¼Œç„¶åè¿è¡Œpipenv shell\n1 2  cd /clusterfuzz pipenv shell   butler.py butlerå°±æ˜¯ç®¡å®¶çš„æ„æ€ï¼Œæˆ‘ä»¬é€šè¿‡è¿™ä¸ªpythonæ–‡ä»¶æ‰§è¡Œå„ç§åŠŸèƒ½ï¼ŒæŸ¥çœ‹å¸®åŠ©python butler.py --help\nå¹³æ—¶ä¸»è¦ç”¨åˆ°å°±ä¸¤ä¸ªåŠŸèƒ½\nå¯åŠ¨ç½‘é¡µ(App Engine) æŸ¥çœ‹å¸®åŠ©: python butler.py run_server --help\nç¬¬ä¸€æ¬¡è¿è¡Œéœ€è¦åŠ ä¸Š-bé€‰é¡¹(--bootstrap)ï¼Œä»¥åå°±ä¸ç”¨äº†ï¼Œå¦å¤–æ¨èåŠ ä¸Š--skip-install-deps (ä¸åŠ ä¸Šæ¯æ¬¡éƒ½å®‰è£…å¾ˆå¤šä¸œè¥¿ï¼Œæ„Ÿè§‰æ˜¯æˆ‘ä»¬ä¹‹å‰ä¾èµ–éƒ½å·²ç»è£…è¿‡äº†ï¼Œæˆ‘è¯•è¿‡åŠ ä¸Šæ²¡äº‹ï¼Œæœ‰é—®é¢˜å†å»æ‰è¿™ä¸ªé€‰é¡¹): python butler.py run_server -b --skip-install-depsï¼Œçœ‹åˆ°ä¸‹é¢å†…å®¹å°±è¿è¡Œokäº†\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37  (clusterfuzz) root@manjaro:/clusterfuzz# python butler.py run_server -b --skip-install-deps Running: pkill -KILL -f \u0026#34;dev_appserver.py\u0026#34; | Return code is non-zero (-9). Running: pkill -KILL -f \u0026#34;CloudDatastore.jar\u0026#34; | Return code is non-zero (-9). Running: pkill -KILL -f \u0026#34;pubsub-emulator\u0026#34; | Return code is non-zero (-9). Running: pkill -KILL -f \u0026#34;run_bot\u0026#34; | Return code is non-zero (-9). Created symlink: source: /clusterfuzz/configs/test, target /clusterfuzz/src/appengine/config. Created symlink: source: /clusterfuzz/src/protos, target /clusterfuzz/src/appengine/protos. Created symlink: source: /clusterfuzz/src/python, target /clusterfuzz/src/appengine/python. Running: python polymer_bundler.py (cwd=\u0026#39;local\u0026#39;) | Building templates for App Engine... | App Engine templates built successfully. Created symlink: source: /clusterfuzz/local/storage/local_gcs, target /clusterfuzz/src/appengine/local_gcs. Running: gunicorn -b :9000 main:app (cwd=\u0026#39;src/appengine\u0026#39;) | [2020-05-19 09:24:25 +0800] [22845] [INFO] Starting gunicorn 20.0.4 | [2020-05-19 09:24:25 +0800] [22845] [INFO] Listening at: http://0.0.0.0:9000 (22845) | [2020-05-19 09:24:25 +0800] [22845] [INFO] Using worker: sync | [2020-05-19 09:24:25 +0800] [22855] [INFO] Booting worker with pid: 22855 Bootstrapping datastore... Running: python butler.py run setup --non-dry-run --local --config-dir=configs/test | Creating config | Creating fuzzer afl | Creating fuzzer libFuzzer | Creating fuzzer honggfuzz | Creating fuzzer syzkaller | Creating template afl | Creating template engine_asan | Creating template engine_msan | Creating template engine_ubsan | Creating template honggfuzz | Creating template libfuzzer | Creating template syzkaller | Creating template prune | Done   ä¹‹åçš„è¿è¡Œéƒ½ä¸éœ€è¦åŠ -bé€‰é¡¹ï¼Œç›´æ¥python butler.py run_server --skip-install-deps\nè¿è¡Œfuzzing bots ä¸Šé¢çš„ç½‘é¡µ(app engine)ç›¸å½“äºåªæ˜¯ä¸€ä¸ªäº¤äº’ç•Œé¢/æ§åˆ¶å°è€Œå·²ï¼Œå…·ä½“çš„fuzzingå·¥ä½œéƒ½è¿˜éœ€è¦è¿è¡Œfuzzing botsæ‰è¡Œï¼Œfuzzing botså¯ä»¥è¿è¡Œå¤šä¸ªï¼Œè€Œä¸”å¯ä»¥å•ç‹¬è¿è¡Œåœ¨å…¶å®ƒå®¹å™¨ä¸­ï¼ˆåé¢å†è¯•ï¼Œç°åœ¨ç›´æ¥è¿˜åœ¨è¿™ä¸ªå®¹å™¨ä¸­è¿è¡Œï¼‰\nå¦å¤–ï¼Œæˆ‘åœ¨dockerå®¹å™¨å†…è¿è¡Œçš„ubuntuï¼Œè¦å¤šå¼€ä¸€ä¸ªå‘½ä»¤è¡Œçš„è¯å¯ä»¥ä½¿ç”¨tmux\nå®‰è£…tmux: apt install tmux\næˆ–è€…ä¸»æœºä¸Šåœ¨è¿è¡Œçš„å®¹å™¨ä¸Šå†å¼€ä¸€ä¸ªshell\n1 2 3 4 5 6  docker container exec -it clusterfuzz bash root@manjaro:/# cd /clusterfuzz root@manjaro:/clusterfuzz# pipenv shell Launching subshell in virtual environmentâ€¦ root@manjaro:/clusterfuzz# . /root/.local/share/virtualenvs/clusterfuzz-rAL0Uxhl/bin/activate (clusterfuzz) root@manjaro:/clusterfuzz#   æŸ¥çœ‹è¿è¡Œbotsçš„å¸®åŠ©: python butler.py run_bot --help\nè¿è¡Œæ•ˆæœå¦‚ä¸‹\n1  python butler.py run_bot --name bot01 ./bot01 # rename my-bot to anything   æµ‹è¯• è¿™é‡Œçš„æ­¥éª¤å¯ä»¥å‚è€ƒå®˜æ–¹æ•™ç¨‹ï¼Œæ¯”è¾ƒè¯¦ç»†: Setting up fuzzing\næˆ‘è¿™é‡Œç®€å•åœ°è¿›è¡Œéƒ¨åˆ†ç¿»è¯‘ï¼Œä¸‹é¢çš„æ“ä½œä¸ç”¨åœ¨å®¹å™¨å†…è¿›è¡Œ\nå®‰è£…libfuzzer debianç³»ç»Ÿå¯å‚è€ƒLLVM Debian/Ubuntu nightly packagesï¼Œæˆ‘ä¹Ÿä¸æ¸…æ¥šåˆ°åº•å®‰è£…å“ªäº›ï¼Œä¹Ÿæ²¡æ‰¾åˆ°å¥½çš„æ•™ç¨‹ï¼Œæºç å®‰è£…æ„Ÿè§‰ä¸å¤ªæ–¹ä¾¿ï¼Œç›´æ¥ç”¨åŒ…ç®¡ç†å™¨åº”è¯¥å°±è¡Œï¼Œç†Ÿæ‚‰è¿™å—å„¿çš„æ¬¢è¿ç•™è¨€å‘Šè¯‰ã€‚\nç¼–å†™fuzzer æˆ‘è¿™é‡Œç›´æ¥ä½¿ç”¨è¿™é‡Œçš„fuzz_me.cc:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15  #include \u0026lt;stdint.h\u0026gt;#include \u0026lt;stddef.h\u0026gt; bool FuzzMe(const uint8_t *Data, size_t DataSize) { return DataSize \u0026gt;= 3 \u0026amp;\u0026amp; Data[0] == \u0026#39;F\u0026#39; \u0026amp;\u0026amp; Data[1] == \u0026#39;U\u0026#39; \u0026amp;\u0026amp; Data[2] == \u0026#39;Z\u0026#39; \u0026amp;\u0026amp; Data[3] == \u0026#39;Z\u0026#39;; // :â€‘\u0026lt; } extern \u0026#34;C\u0026#34; int LLVMFuzzerTestOneInput(const uint8_t *Data, size_t Size) { FuzzMe(Data, Size); return 0; }   ä¸Šä¼ fuzzerè¿›è¡Œæµ‹è¯• ç¼–è¯‘ï¼Œå‹ç¼©\n1 2  clang++ -g fuzz_me.cc -o fuzz_me -fsanitize=address,undefined,fuzzer zip fuzz_me.zip fuzz_me   åœ¨jobsé¡µé¢æœ€åº•ä¸‹å¡«å†™ADD NEW JOBè¡¨æ ¼(å…·ä½“æ€ä¹ˆå¡«çœ‹å®˜æ–¹æ–‡æ¡£: Creating a job type)ï¼Œç„¶åç‚¹å‡»ADDæ·»åŠ \nåœ¨Fuzzersé¡µé¢é€‰æ‹©libFuzzerï¼Œç‚¹å‡»EDITï¼Œå‹¾é€‰åˆšæ‰çš„jobï¼Œæäº¤SUBMIT\næŸ¥çœ‹ç»“æœ å¸¸è§é—®é¢˜  å¦‚æœä½ æ˜¯ç›´æ¥åœ¨æœ¬æœºubuntuä¸Šæµ‹è¯•ï¼Œæœ‰äº›å‘½ä»¤éœ€è¦ç”¨sudoæ‰èƒ½æ‰§è¡Œï¼Œè€Œç¯å¢ƒå˜é‡http_proxyå’Œhttps_proxyå¾ˆå¯èƒ½ä¸ä¼šè¢«ç»§æ‰¿ï¼ŒåŠç”¨sudoæ‰§è¡Œå‘½ä»¤å¾ˆå¯èƒ½ä¸ä¼šèµ°ä»£ç†ï¼Œä½ å¯ä»¥å‚è€ƒHow to run â€œsudo apt-get updateâ€ through proxy in commandline?è¿›è¡Œè®¾ç½®:\nå³æ‰§è¡Œvisudoï¼Œåœ¨Defaults env_resetæ‰€åœ¨è¡Œä¸‹é¢æ·»åŠ \nDefaults env_keep=\u0026quot;http_proxy https_proxy ftp_proxy DISPLAY XAUTHORITY\u0026quot; å•Šçš„  å‚è€ƒ  å®‰è£…åŠä½¿ç”¨ä¸»è¦å‚è€ƒclusterfuzzå®˜æ–¹æ–‡æ¡£ å®‰è£…è¿‡ç¨‹è¿˜ä¸»è¦å‚è€ƒäº†clusterfuzzä»“åº“å†…çš„ä¸¤ä¸ªæ–‡ä»¶: Dockerfile, install_deps_linux.bash libFuzzerçš„ä½¿ç”¨å‚è€ƒlibFuzzer Tutorialå’Œlibfuzzerå®˜æ–¹æ–‡æ¡£  ","description":"","id":4,"section":"posts","tags":[""],"title":"Clusterfuzz Local Setup","uri":"https://sky-bro.github.io/zh/posts/clusterfuzz-local-setup/"},{"content":"ğŸš© å…³äºæœ¬ç«™ ä½¿ç”¨Hugoç”Ÿæˆï¼Œåšå®¢æºç åœ¨blog-src, ä¸»é¢˜fork(my fork)è‡ª: hugo-theme-zzo\nğŸŒ… æˆ‘çš„æ—¥å¸¸  @å“ˆå·¥å¤§ C / C++, Python, ASM Arch, VSCode CTF / Binary  ğŸ’Œ è”ç³»æˆ‘  é‚®ä»¶: sky_io@outlook.com å¾®ä¿¡: sky_bro è„¸ä¹¦: Kaiyu Shi æ¨ç‰¹: KaiyuShi GPGå…¬é’¥: Kyle.asc (F4CD 0E4A 3661 65D1 62E6 B6CE 7D36 AE60 55B0 60A6)  ğŸ” æˆ‘çš„æœ‹å‹ TheSong, è·¯äººæ­, wxk\nğŸ¼ æœ€è¿‘åœ¨å¬ \n","description":"About Kyle Shi / sky / Kaiyu Shi, whoami, I am an enthusiast!","id":5,"section":"","tags":null,"title":"å…³äº","uri":"https://sky-bro.github.io/zh/about/"}]